<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
        <title>The Engine - Plates</title>
    
    
        <meta name="description" content="Plates is a Twig inspired, native PHP template system that brings modern template language functionality to native PHP templates.">
    
    
    
        <link rel="icon" type="image/x-icon" href="/v4-alpha/favicon.ico" />
    
    
        <link rel="apple-touch-icon-precomposed" href="/v4-alpha/apple-touch-icon-precomposed.png">
    
    <link rel="stylesheet" href="//theme.thephpleague.com/css/all.css">
    <link rel="stylesheet" href="/v4-alpha/css/custom.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/css/select2.min.css" rel="stylesheet" />
</head>
<body>

<a href="https://github.com/thephpleague/plates" class="github">
    <img src="https://camo.githubusercontent.com/365986a132ccd6a44c23a9169022c0b5c890c387/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f7265645f6161303030302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png">
</a>

<section class="all_packages">
    <a href="//thephpleague.com/">
        <img src="//theme.thephpleague.com/img/loep_logo.png" width="195" height="200" alt="The League of Extraordinary Packages">
    </a>
    <h2>Our Packages:</h2>
    <ul>
        <!-- Loaded via JavaScript -->
    </ul>
</section>

<header>
    <a class="logo" href="/">
        
            <span class="icon">
                <img src="/v4-alpha/logo.png" width="50" height="40" alt="Plates - Native PHP Templates">
            </span>
        
        <span class="name">Plates</span>
        <span class="tagline">Native PHP Templates</span>
    </a>
    <a href="//thephpleague.com/" class="league">
        Presented by The League of Extraordinary Packages
    </a>
</header>

<input type="checkbox" id="menu">
<label for="menu" onclick>
    <div class="closed">&#9776; Menu</div>
    <div class="open">&#9776; Hide Menu</div>
</label>

<main>
    <menu>
        
        <div class="version-select">
            <select class="version-select select2" style="width: 100%" data-minimum-results-for-search="5">
            
                
                <option value="master">
                
                    Master
                </option>
            
                
                <option value="v4-alpha" selected="selected">
                
                    V4 Alpha
                </option>
            
                
                <option value="v3">
                
                    V3
                </option>
            
            </select>
        </div>
        
        
            <h2>Getting Started</h2>
            <ul>
                
                    <li >
                        <a href="/v4-alpha/">Introduction</a>
                    </li>
                
                    <li >
                        <a href="/v4-alpha/installation/">Installation</a>
                    </li>
                
                    <li >
                        <a href="/v4-alpha/simple-example/">Simple example</a>
                    </li>
                
                    <li >
                        <a href="/v4-alpha/upgrading-from-v3/">Upgrading from V3</a>
                    </li>
                
                    <li >
                        <a href="/v4-alpha/changelog/">Changelog</a>
                    </li>
                
            </ul>
        
            <h2>The Engine</h2>
            <ul>
                
                    <li class="selected">
                        <a href="/v4-alpha/engine/">Overview</a>
                    </li>
                
                    <li >
                        <a href="/v4-alpha/engine/extensions/">Extensions</a>
                    </li>
                
                    <li >
                        <a href="/v4-alpha/engine/framework-integration/">Framework Integration</a>
                    </li>
                
            </ul>
        
    </menu>
    <article>
        <h1 id="the-engine">The Engine</h1>

<p>The Engine is responsible for configuring the Plates system and is the entry point for rendering templates. It wraps an IoC container which stores anything and everything from global template data, functions, render templates, and more. All of your extension and template configuration is stored in one place which makes configuring plates simple and manageable.</p>

<h2 id="basic-usage">Basic Usage</h2>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$plates</span> <span class="o">=</span> <span class="nx">League\Plates\Engine</span><span class="o">::</span><span class="na">create</span><span class="p">(</span><span class="s1">'/path/to/templates'</span><span class="p">);</span>

<span class="c1">// optionally add/merge config values
</span><span class="nv">$plates</span><span class="o">-&gt;</span><span class="na">addConfig</span><span class="p">([</span>
    <span class="s1">'render_context_var_name'</span> <span class="o">=&gt;</span> <span class="s1">'v'</span><span class="p">,</span>
<span class="p">]);</span>

<span class="c1">// optionally call an extension defined method to further configure the engine and the extensions
</span><span class="nv">$plates</span><span class="o">-&gt;</span><span class="na">addGlobal</span><span class="p">(</span><span class="s1">'siteName'</span><span class="p">,</span> <span class="s1">'Acme'</span><span class="p">);</span>

<span class="c1">// register any custom extensions
</span><span class="nv">$plates</span><span class="o">-&gt;</span><span class="na">register</span><span class="p">(</span><span class="k">new</span> <span class="nx">MyCustomExtension</span><span class="p">());</span>

<span class="k">echo</span> <span class="nv">$plates</span><span class="o">-&gt;</span><span class="na">render</span><span class="p">(</span><span class="s1">'home'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'title'</span> <span class="o">=&gt;</span> <span class="s1">'Home Page'</span><span class="p">]);</span>
</code></pre></div></div>

<h2 id="creating-the-engine">Creating the Engine</h2>

<p>The Engine comes with several constructors that offer varying degrees of customization.</p>

<h3 id="createbasedir-ext--null">create($baseDir, $ext = null)</h3>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$plates</span> <span class="o">=</span> <span class="nx">League\Plates\Engine</span><span class="o">::</span><span class="na">create</span><span class="p">(</span><span class="s1">'/path/to/templates'</span><span class="p">,</span> <span class="nv">$ext</span> <span class="o">=</span> <span class="s1">'phtml'</span><span class="p">);</span>
</code></pre></div></div>

<p>Creates the plates Engine sets the base dir and extension and loads all of the standard extensions.</p>

<h3 id="createwithconfigarray-config--">createWithConfig(array $config = [])</h3>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$plates</span> <span class="o">=</span> <span class="nx">League\Plates\Engine</span><span class="o">::</span><span class="na">createWithConfig</span><span class="p">([</span>
    <span class="s1">'base_dir'</span> <span class="o">=&gt;</span> <span class="s1">'/path/to/templates'</span><span class="p">,</span>
    <span class="s1">'ext'</span> <span class="o">=&gt;</span> <span class="s1">'phtml'</span><span class="p">,</span>
    <span class="s1">'escape_encoding'</span> <span class="o">=&gt;</span> <span class="s1">'UTF-8'</span>
<span class="p">]);</span>
</code></pre></div></div>

<p>This creates the engine, loads the standard extensions and then calls <code class="highlighter-rouge">addConfig</code> on the given config.</p>

<h3 id="__constructleagueplatesutilcontainer-container--null">__construct(League\Plates\Util\Container $container = null)</h3>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$plates</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">League\Plates\Engine</span><span class="p">();</span>
</code></pre></div></div>

<p>Creates an empty instance of the plates engine without any extensions or configuration loaded. Optionally, you can pass in an instance of the <code class="highlighter-rouge">League\Plates\Util\Container</code>.</p>

<p><strong>Note</strong> This is for advanced usage only, typically you’ll want to use the other static constructors.</p>

<h2 id="configuring-the-engine">Configuring the Engine</h2>

<p>Once you’ve created an engine, you can then configure it by loading extensions and calling extension methods.</p>

<h3 id="registering-extensions">Registering Extensions</h3>

<p>You can register extensions via:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$plates</span><span class="o">-&gt;</span><span class="na">register</span><span class="p">(</span><span class="k">new</span> <span class="nx">MyAwesomeExtension</span><span class="p">());</span>
</code></pre></div></div>

<h3 id="config">Config</h3>

<p>You can define config values via <code class="highlighter-rouge">addConfig</code>.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$plates</span><span class="o">-&gt;</span><span class="na">addConfig</span><span class="p">([</span>
    <span class="s1">'config_item'</span> <span class="o">=&gt;</span> <span class="s1">'val'</span>
<span class="p">]);</span>
</code></pre></div></div>

<p>This merges your defined config with the existing configuration defintions. Extensions define a default set of config values which can configured to customize each extension. You’ll want to read through each extension documentation to see the configuration values they support.</p>

<h3 id="engine-methods">Engine Methods</h3>

<p>Extensions can also define methods on the Engine which can be used for configuration. You can define methods with <code class="highlighter-rouge">addMethods</code>:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$plates</span><span class="o">-&gt;</span><span class="na">addMethods</span><span class="p">([</span>
    <span class="s1">'acmeFn'</span> <span class="o">=&gt;</span> <span class="k">function</span><span class="p">(</span><span class="nx">Engine</span> <span class="nv">$plates</span><span class="p">,</span> <span class="nv">$arg1</span><span class="p">,</span> <span class="nv">$arg2</span> <span class="o">=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// do some stuff to the engine
</span>    <span class="p">}</span>
<span class="p">])</span>
</code></pre></div></div>

<p>You can then call the <code class="highlighter-rouge">acmeFn</code> function on the Engine. It shares the same signature as the method definition, but without the Engine method as the first argument.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$plates</span><span class="o">-&gt;</span><span class="na">acmeFn</span><span class="p">(</span><span class="s1">'arg1'</span><span class="p">);</span> <span class="c1">// arg2 is optional in this instance.
</span></code></pre></div></div>

<p>Here are a few examples of Engine Methods which are used for configuring.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// addFolder is defined by the FolderExtension
</span><span class="nv">$plates</span><span class="o">-&gt;</span><span class="na">addFolder</span><span class="p">(</span><span class="s1">'folderName'</span><span class="p">,</span> <span class="s1">'folderPathPrefix'</span><span class="p">);</span>
<span class="c1">// addGlobals is defined by the DataExtension
</span><span class="nv">$plates</span><span class="o">-&gt;</span><span class="na">addGlobals</span><span class="p">([</span>
    <span class="s1">'isLoggedIn'</span> <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s1">'siteName'</span> <span class="o">=&gt;</span> <span class="s1">'Acme Site'</span>
<span class="p">]);</span>
</code></pre></div></div>

<p>In this example, we’ve defined a folder and two globals for our Engine.</p>

<p>You can check each extensions’ documentation to see the different engine methods they define.</p>

<h2 id="rendering-templates">Rendering Templates</h2>

<p>The engine provides the <code class="highlighter-rouge">render(string $name, array $data, array $attributes = []): string</code> for rendering a template into a string.</p>

<p>This is just a convenience function over:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$plates-&gt;getContainer()-&gt;get('renderTemplate')-&gt;render(new Template($name, $data, $attributes));
</code></pre></div></div>

<p>The <code class="highlighter-rouge">RenderTemplate</code> interface is what is actually responsible for rendering template instances into strings.</p>

    </article>
</main>

<footer>
    <span>&copy; Copyright <a href="//thephpleague.com">The League of Extraordinary Packages</a>.</span>
    <span>Site design by <a href="//reinink.ca">Jonathan Reinink</a>.</span>
</footer>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="//theme.thephpleague.com/js/scripts.js"></script>
<script src="//theme.thephpleague.com/js/prism.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/js/select2.min.js"></script>
<script>
$('select.select2').select2().on('change', function(e) {
    var pathParts = window.location.pathname.split("/");
    pathParts[1] = e.currentTarget.value;
    window.location.href = pathParts.join("/");
});
</script>


    <script>
        (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
        function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
        e=o.createElement(i);r=o.getElementsByTagName(i)[0];
        e.src='//www.google-analytics.com/analytics.js';
        r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
        ga('create','UA-46050814-2');ga('send','pageview');
    </script>


</body>
</html>
